# Contributing to @abbababa/sdk

Thank you for your interest in contributing to the Abbababa SDK! This document provides guidelines for external contributors.

## Important: Sync Process

This repository is automatically synced from an internal monorepo. Changes are synced from the private repository to this public mirror within 30-60 seconds of being merged.

**What this means for contributors:**
- You can fork this repo and submit PRs as normal
- Approved PRs will be manually integrated into the internal monorepo first
- Changes will then sync back to this public repo automatically
- Your PR may be closed without merging, but your contribution will be credited

See [SYNC.md](./SYNC.md) for technical details about the sync process.

## Getting Started

### Prerequisites
- Node.js 20 or higher
- npm 10 or higher
- Git

### Development Setup

1. **Fork and clone the repository**
   ```bash
   git clone https://github.com/YOUR_USERNAME/abbababa-sdk.git
   cd abbababa-sdk
   ```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Build the project**
   ```bash
   npm run build
   ```

4. **Type check**
   ```bash
   npm run type-check
   ```

### Project Structure

```
abbababa-sdk/
â”œâ”€â”€ src/                  # TypeScript source files
â”‚   â”œâ”€â”€ index.ts          # Main exports (BuyerAgent, SellerAgent, AbbabaClient)
â”‚   â”œâ”€â”€ buyer.ts          # BuyerAgent orchestrator
â”‚   â”œâ”€â”€ seller.ts         # SellerAgent orchestrator
â”‚   â”œâ”€â”€ api/              # Low-level API clients (Services, Transactions, Checkout)
â”‚   â”œâ”€â”€ wallet/           # On-chain features (Escrow, Score, Resolver, Session Keys)
â”‚   â””â”€â”€ types.ts          # TypeScript type definitions
â”œâ”€â”€ dist/                 # Compiled JavaScript (generated by build)
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

## Development Workflow

### Making Changes

1. **Create a feature branch**
   ```bash
   git checkout -b feature/your-feature-name
   ```

2. **Make your changes**
   - Edit files in `src/`
   - Follow the existing code style
   - Add TypeScript types for new APIs
   - Update documentation in comments

3. **Build and test**
   ```bash
   npm run build
   npm run type-check
   ```

4. **Commit your changes**
   - Use [Conventional Commits](https://www.conventionalcommits.org/) format
   - Examples:
     - `feat: add wallet balance check method`
     - `fix: handle timeout errors in checkout`
     - `docs: clarify escrow funding example`
     - `refactor: simplify error handling in BuyerAgent`

5. **Push and create PR**
   ```bash
   git push origin feature/your-feature-name
   ```
   Then open a pull request on GitHub.

### Commit Message Guidelines

We follow [Conventional Commits](https://www.conventionalcommits.org/):

```
<type>(<scope>): <description>

[optional body]

[optional footer]
```

**Types:**
- `feat`: New feature
- `fix`: Bug fix
- `docs`: Documentation changes
- `refactor`: Code refactoring (no feature/bug changes)
- `test`: Adding or updating tests
- `chore`: Maintenance tasks

**Scopes (optional):**
- `buyer`: BuyerAgent
- `seller`: SellerAgent
- `escrow`: EscrowClient
- `wallet`: Wallet-related features
- `api`: API clients

**Examples:**
```
feat(buyer): add retry logic for failed transactions
fix(escrow): correct fee calculation for multi-token support
docs: update README with session key examples
refactor(wallet): simplify smart account initialization
```

## Code Style

- **TypeScript**: Use strict types, avoid `any`
- **Formatting**: 2-space indentation, semicolons
- **Naming**: camelCase for variables/functions, PascalCase for classes/types
- **Exports**: Use named exports (not default exports)
- **Comments**: JSDoc for public APIs

## What to Contribute

We welcome:

- **Bug fixes**: Crash fixes, error handling improvements
- **Feature additions**: New SDK methods, wallet utilities
- **Documentation**: Examples, clarifications, typo fixes
- **Type improvements**: Better TypeScript definitions
- **Performance**: Optimizations with benchmarks

Please avoid:

- **Breaking changes** without discussion (open an issue first)
- **Large refactors** without prior approval
- **Dependency additions** without justification

## Testing Your Changes

Currently, the SDK does not have automated tests. When contributing:

1. Manually test your changes against the Abbababa API
2. Verify the build succeeds: `npm run build`
3. Check types: `npm run type-check`
4. Document test cases in your PR description

## Pull Request Process

1. **Ensure your PR**:
   - Has a clear title and description
   - References related issues (if any)
   - Includes examples of usage (for new features)
   - Passes build and type checks

2. **Review process**:
   - A maintainer will review your PR
   - You may be asked to make changes
   - Once approved, it will be integrated into the internal monorepo
   - Changes will sync back to this public repo automatically

3. **After merge**:
   - Your contribution will appear in the next release
   - You'll be credited as a co-author in the commit message
   - The public PR may be closed without merging (expected behavior)

## Questions or Issues?

- **Bug reports**: [Open an issue](https://github.com/kkalmanowicz/abbababa-sdk/issues)
- **Feature requests**: [Open an issue](https://github.com/kkalmanowicz/abbababa-sdk/issues) with the "enhancement" label
- **Questions**: Use [GitHub Discussions](https://github.com/kkalmanowicz/abbababa-sdk/discussions)

## License Agreement

By contributing to this project, you agree that your contributions will be licensed under the MIT License.

---

Thank you for contributing to @abbababa/sdk! ðŸŽ‰
